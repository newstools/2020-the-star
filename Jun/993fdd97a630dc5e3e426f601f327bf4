The U.S. Supreme Court on Thursday dealt a President Donald Trump a major setback on his hardline immigration policies, ruling against his bid to end a program that protects from deportation hundreds of thousands of immigrants, dubbed "Dreamers," who entered the United States illegally as children. The justices on a 5-4 vote upheld lower court rulings that found that Trump's 2017 move to rescind the Deferred Action for Childhood Arrivals (DACA) program, created in 2012 by his Democratic predecessor Barack Obama, was unlawful. Conservative Chief Justice John Roberts joined the court's four liberals in finding that the administrations actions were "arbitrary and capricious" under a federal law called the Administrative Procedure Act. The ruling means that the roughly 649,000 immigrants, mostly young Hispanic adults born in Mexico and other Latin American countries, currently enrolled in DACA will remain protected from deportation and eligible to obtain renewable two-year work permits. The ruling does not prevent Trump from trying again to end the program. But his administration is unlikely to be able to end DACA before the Nov. 3 election in which Trump is seeking a second four-year term in office. "We do not decide whether DACA or its rescission are sound policies. We address only whether the agency complied with the procedural requirement that it provide a reasoned explanation for its action," Roberts wrote. The ruling marks the second time this week that Roberts has ruled against Trump in a major case following Monday's decision finding that gay and transgender workers are protected under federal employment law. The court's four other conservatives including two Trump appointees, Neil Gorsuch and Brett Kavanaugh, dissented. "Today's decision must be recognized for what it is: an effort to avoid a politically controversial but legally correct decision," conservative Justice Clarence Thomas wrote in dissent. Trump's administration has argued that Obama exceeded his constitutional powers when he created DACA by executive action, bypassing Congress. A collection of states including California and New York, people currently enrolled in DACA and civil rights groups all filed suit to block Trump's plan to end the program. Lower courts in California, New York and the District of Columbia ruled against Trump and left DACA in place, finding that his move to revoke the program violated a U.S. law called the Administrative Procedure Act. Trump has made his crackdown on legal and illegal immigration, including pursuing construction of a wall along the U.S.-Mexican border, a central part of his presidency and his 2020 re-election campaign. Roberts a year ago also cast the decisive vote in a Supreme Court loss for the Republican president when the justices blocked Trump's administration from adding a citizenship question to the 2020 census that critics said was an effort to dissuade immigrants from taking part in the decennial population count. (Reporting by Lawrence Hurley; Additional reporting by Andrew Chung and Jan Wolfe; Editing by Will Dunham)